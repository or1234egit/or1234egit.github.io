<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Math Notes</title>

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
  <!-- Markdown parser -->
  <script defer src="https://cdn.jsdelivr.net/npm/marked@12.0.2/marked.min.js"></script>

  <style>
    :root{
      --bg: #0b1220;          /* deep ink */
      --panel: #0f172a;       /* slate-900 */
      --panel-2: #111827;     /* gray-900 */
      --text: #e5e7eb;        /* gray-200 */
      --muted: #94a3b8;       /* slate-400 */
      --border: #1f2937;      /* gray-800 */
      --accent: #60a5fa;      /* sky-400 */
      --accent-strong:#3b82f6;/* blue-500 */
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 14px;
      --maxw: 1100px;
    }

    /* ===== base ===== */
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, system-ui;
      color: var(--text);
      background:
        radial-gradient(80rem 60rem at -20% -10%, #1e293b40, transparent),
        radial-gradient(80rem 60rem at 120% 10%, #0ea5e940, transparent),
        var(--bg);
      line-height:1.65;
    }

    .container{
      width:100%;
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 28px 20px 56px;
    }

    /* ===== header ===== */
    .header{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom: 18px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
    }
    .logo{
      width:36px; height:36px; border-radius:10px;
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      box-shadow: 0 4px 14px rgba(59,130,246,.45);
    }
    h1{
      margin:0;
      font-size: clamp(1.5rem, 2.2vw + .8rem, 2rem);
      font-weight:700;
      letter-spacing:.2px;
    }
    .header-actions{ margin-left:auto; display:flex; gap:10px; }

    .btn{
      appearance:none; border:none; cursor:pointer;
      background: #0b1220; color: var(--text);
      padding: .55rem .9rem; border-radius:10px;
      border:1px solid var(--border);
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      text-decoration:none; font-size:.92rem;
    }
    .btn:hover{ background:#0e1526; border-color:#263244 }
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color:#0b1220; font-weight:600; border:none;
      box-shadow: 0 6px 16px rgba(59,130,246,.35);
    }
    .btn.primary:hover{ filter: brightness(1.08) }

    /* ===== tabs ===== */
    .tabs-wrap{
      position:sticky; top:0; z-index:10;
      background: linear-gradient(180deg, #0b1220 60%, #0b122000);
      padding-top:6px; margin-top:6px;
    }
    .tabs{
      display:flex; gap:22px; flex-wrap:wrap;
      border-bottom:1px solid var(--border);
      padding: 10px 2px 0;
    }
    .tab{
      background:none; border:none; color:var(--muted);
      font: inherit; padding: 8px 0 12px; cursor:pointer;
      position:relative; transition: color .15s ease;
    }
    .tab:hover{ color:#c7d2fe }
    .tab.active{ color: #fff; font-weight:600 }
    .tab::after{
      content:""; position:absolute; left:0; bottom:-1px; height:2px; width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-strong));
      transition: width .22s ease;
    }
    .tab.active::after{ width:100% }

    /* ===== content card ===== */
    #contentWrap{
      background: linear-gradient(180deg, #0f172a, #0e1628);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-top:18px;
    }
    #content{
      padding: clamp(18px, 2.2vw, 28px);
      font-size: 17px;
    }
    #content h2, #content h3{
      letter-spacing:.2px; margin-top: .2rem;
    }

    /* KaTeX spacing */
    .katex-display{ margin: 1.1rem 0 }
    code{ background:#0b1220; padding: .18rem .4rem; border-radius:8px; border:1px solid #182033 }

    /* small screens */
    @media (max-width: 720px){
      .header{ flex-wrap:wrap; gap:12px }
      .header-actions{ width:100%; justify-content:flex-start }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>Math Notes</h1>
      </div>
      <div class="header-actions">
        <a id="viewLink" class="btn" target="_blank" rel="noopener">View on GitHub</a>
        <a id="editLink" class="btn primary" target="_blank" rel="noopener">Edit on GitHub</a>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs-wrap">
      <div class="tabs" id="tabs"></div>
    </div>

    <!-- Content -->
    <div id="contentWrap"><div id="content">Loading…</div></div>
  </div>

  <script>
    /* ======= configure your repo ======= */
    const GITHUB_USER   = "or1234egit";
    const GITHUB_REPO   = "or1234egit.github.io"; // change if notes live in another repo
    const GITHUB_BRANCH = "main";
    /* =================================== */

    // list your notes here (order = tab order)
    const notes = [
      "notes/note1.md",
      "notes/note2.md",
      "notes/note3.md",
      "notes/note4.md",
      "notes/note5.md"
    ];

    function renderMathIn(el){
      renderMathInElement(el, {
        delimiters: [
          {left:"$$", right:"$$", display:true},
          {left:"$",  right:"$",  display:false},
          {left:"\\(", right:"\\)", display:false},
          {left:"\\[", right:"\\]", display:true}
        ],
        throwOnError:false
      });
    }

    async function loadNote(path){
      const content = document.getElementById('content');
      const base = `https://github.com/${GITHUB_USER}/${GITHUB_REPO}`;
      document.getElementById('viewLink').href = `${base}/blob/${GITHUB_BRANCH}/${path}`;
      document.getElementById('editLink').href = `${base}/edit/${GITHUB_BRANCH}/${path}`;

      content.textContent = "Loading…";
      try{
        const res = await fetch(path, {cache:"no-cache"});
        if(!res.ok) throw new Error(res.status+" "+res.statusText);
        const md  = await res.text();
        const html= marked.parse(md);
        content.innerHTML = html;
        renderMathIn(content);

        // use first heading as tab label
        const firstHeading = content.querySelector("h1,h2,h3,h4,h5,h6");
        if(firstHeading){
          const tab = document.querySelector(`.tab[data-file='${path}']`);
          if(tab) tab.textContent = firstHeading.textContent.trim();
        }
      }catch(err){
        content.innerHTML = `<p style="color:#fca5a5">Failed to load: ${path}<br>${err}</p>`;
      }
    }

    // build tabs
    const tabsEl = document.getElementById('tabs');
    notes.forEach((path, i) => {
      const btn = document.createElement("button");
      btn.className = "tab"+(i===0?" active":"");
      btn.dataset.file = path;
      btn.textContent = "Loading…"; // will be replaced after load
      btn.addEventListener("click", () => {
        document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        loadNote(path);
      });
      tabsEl.appendChild(btn);
    });

    // initial load
    loadNote(notes[0]);
  </script>
</body>
</html>
